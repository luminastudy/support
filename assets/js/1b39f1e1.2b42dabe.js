"use strict";(globalThis.webpackChunk_lumina_study_support=globalThis.webpackChunk_lumina_study_support||[]).push([[571],{4533:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>o,default:()=>r,frontMatter:()=>c,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"developers/updating-blocks-schema","title":"Updating Blocks Schema","description":"Automation","source":"@site/docs/developers/updating-blocks-schema.md","sourceDirName":"developers","slug":"/developers/updating-blocks-schema","permalink":"/support/docs/developers/updating-blocks-schema","draft":false,"unlisted":false,"editUrl":"https://github.com/luminastudy/support/tree/main/docs/developers/updating-blocks-schema.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"docsSidebar","previous":{"title":"Developer Setup","permalink":"/support/docs/developers/setup"}}');var t=s(7259),i=s(9796);const c={sidebar_position:2},o="Updating Blocks Schema",d={},l=[{value:"Automation",id:"automation",level:2},{value:"Update Process",id:"update-process",level:2},{value:"1. Update the Block Schema Package",id:"1-update-the-block-schema-package",level:3},{value:"2. Update Dependent Packages",id:"2-update-dependent-packages",level:3},{value:"3. Update VSCode Extension",id:"3-update-vscode-extension",level:3},{value:"Verification",id:"verification",level:2}];function p(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",input:"input",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"updating-blocks-schema",children:"Updating Blocks Schema"})}),"\n",(0,t.jsx)(n.h2,{id:"automation",children:"Automation"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Husky hooks"})," automatically update ",(0,t.jsx)(n.code,{children:"exports"})," field when you commit new schema versions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"CI/CD"})," automatically publishes to npm when it detects version changes"]}),"\n",(0,t.jsx)(n.li,{children:"You only need to: create schema versions, update version number, and commit"}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"update-process",children:"Update Process"}),"\n",(0,t.jsx)(n.h3,{id:"1-update-the-block-schema-package",children:"1. Update the Block Schema Package"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'cd /path/to/block  # @lumina-study/block-schema repository\n\n# Create new schema version (maintain backward compatibility)\nmkdir -p schema/v0.3\ncp schema/v0.2/block.schema.json schema/v0.3/block.schema.json\n# Edit schema/v0.3/block.schema.json with your changes\n\n# Test and commit\npnpm test\n# Update version in package.json (patch/minor/major)\ngit add schema/v0.3/ package.json\ngit commit -m "feat: add schema v0.3 with [describe changes]"\ngit push\n'})}),"\n",(0,t.jsx)(n.h3,{id:"2-update-dependent-packages",children:"2. Update Dependent Packages"}),"\n",(0,t.jsx)(n.p,{children:"Update order (respect dependency chains):"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Tier 1:"})," ",(0,t.jsx)(n.code,{children:"blocks-graph"}),", ",(0,t.jsx)(n.code,{children:"block-store"}),", ",(0,t.jsx)(n.code,{children:"support"}),"\n",(0,t.jsx)(n.strong,{children:"Tier 2:"})," ",(0,t.jsx)(n.code,{children:"@lumina/client"}),", ",(0,t.jsx)(n.code,{children:"courses-manager-client"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'cd /path/to/[package]\npnpm update @lumina-study/block-schema\npnpm build && pnpm test\n# Update version in package.json\ngit add package.json pnpm-lock.yaml\ngit commit -m "chore: update @lumina-study/block-schema to vX.X.X"\ngit push\n'})}),"\n",(0,t.jsx)(n.h3,{id:"3-update-vscode-extension",children:"3. Update VSCode Extension"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:'cd /path/to/vscode-lumina\npnpm update @lumina-study/blocks-graph\npnpm build\n# Test: F5 in VSCode \u2192 open lumina.json file\n# Update version in package.json\ngit add package.json pnpm-lock.yaml\ngit commit -m "chore: update @lumina-study/blocks-graph to vX.X.X"\ngit push\n'})}),"\n",(0,t.jsx)(n.h2,{id:"verification",children:"Verification"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","CI/CD pipeline completed"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Schema package published on ",(0,t.jsx)(n.a,{href:"https://www.npmjs.com/package/@lumina-study/block-schema",children:"npm"})]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","All dependent packages updated"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","VSCode extension preview works"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",disabled:!0})," ","Client applications work"]}),"\n"]})]})}function r(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(p,{...e})}):p(e)}},9796:(e,n,s)=>{s.d(n,{R:()=>c,x:()=>o});var a=s(6363);const t={},i=a.createContext(t);function c(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:c(e.components),a.createElement(i.Provider,{value:n},e.children)}}}]);